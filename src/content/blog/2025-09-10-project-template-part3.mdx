---
title: 'Project Template, Part 3 — Flat ESLint + Prettier + Husky (Zero‑Friction Code Quality)'
excerpt: 'Wire up ESLint (flat config), Prettier v3, Husky and lint-staged so code style and quality happen automatically—locally and in CI.'
date: 2025-09-10
tags: ['eslint', 'prettier', 'husky', 'typescript', 'nextjs', 'productivity']
image: /images/blog/project-template-part3.webp
series: 'Project Template Series'
---

> In **Part 1**, we talked about why every dev should start from a project template.

> In **Part 2**, we made `main` **green by construction** with CI + branch protection.

> Now in **Part 3**, we make code quality _automatic_ with **Flat ESLint + Prettier + Husky**.

My goal with this template is simple: _developers think about features, not formatting_. The tools should catch issues, auto‑fix what they can,
and block regressions before they reach a PR.

📂 **Source code:** [andrewteece/project-template](https://github.com/andrewteece/project-template)

---

## What we’re building

- **Flat ESLint config** (ESLint v9+) with TypeScript + React.
- **Prettier v3** for formatting, plus **`prettier-plugin-tailwindcss`** for class sorting.
- **Husky + lint-staged** to auto‑fix on commit.
- CI that runs `prettier --check` and `eslint` as gates (from Part 2).

Result: you write code, hit commit, and the repo enforces quality automatically.

---

## 1) Install dev dependencies

```bash
npm i -D eslint @eslint/js globals   @typescript-eslint/parser @typescript-eslint/eslint-plugin
eslint-plugin-react eslint-plugin-react-hooks eslint-plugin-import
eslint-config-prettier prettier prettier-plugin-tailwindcss   husky lint-staged
```

If you’re using **pnpm** or **yarn**, swap the install command accordingly.

---

## 2) Prettier v3 config

**`prettier.config.mjs`**

```js
/** @type {import('prettier').Config} */
export default {
  printWidth: 100,
  semi: true,
  singleQuote: true,
  trailingComma: 'all',
  plugins: ['prettier-plugin-tailwindcss'], // sorts Tailwind classnames
};
```

Add helpful scripts:

**`package.json` (partial)**

```json
{
  "scripts": {
    "format": "prettier --write .",
    "format:check": "prettier --check ."
  }
}
```

---

## 3) Flat ESLint (ESLint v9)

Flat configs are just JavaScript arrays. They’re easier to compose and don’t clash with Prettier’s formatting.

**`eslint.config.mjs`**

```js
import js from '@eslint/js';
import globals from 'globals';
import ts from '@typescript-eslint/eslint-plugin';
import tsParser from '@typescript-eslint/parser';
import reactPlugin from 'eslint-plugin-react';
import reactHooks from 'eslint-plugin-react-hooks';
import importPlugin from 'eslint-plugin-import';
import prettier from 'eslint-config-prettier';

export default [
  // Ignore build artifacts
  { ignores: ['.next/**', 'dist/**', 'build/**', 'node_modules/**'] },

  // Base JS rules
  js.configs.recommended,

  // TypeScript (type-aware when project: true)
  {
    languageOptions: {
      parser: tsParser,
      parserOptions: {
        project: true,
        tsconfigRootDir: import.meta.dirname,
      },
      globals: { ...globals.browser, ...globals.node },
    },
    plugins: { '@typescript-eslint': ts },
    rules: {
      '@typescript-eslint/no-unused-vars': [
        'warn',
        { argsIgnorePattern: '^_' },
      ],
    },
  },

  // React + Hooks + import hygiene
  {
    settings: { react: { version: 'detect' } },
    plugins: {
      react: reactPlugin,
      'react-hooks': reactHooks,
      import: importPlugin,
    },
    rules: {
      'react-hooks/rules-of-hooks': 'error',
      'react-hooks/exhaustive-deps': 'warn',
      'import/order': [
        'error',
        {
          'newlines-between': 'always',
          alphabetize: { order: 'asc', caseInsensitive: true },
        },
      ],
    },
  },

  // Turn off stylistic rules that fight Prettier
  prettier,
];
```

Add scripts:

**`package.json` (partial)**

```json
{
  "scripts": {
    "lint": "eslint .",
    "lint:fix": "eslint . --fix"
  }
}
```

> **Tip:** If your project doesn’t need type‑aware rules, you can drop `parserOptions.project: true` to speed linting up. For monorepos, point `project` at the relevant `tsconfig.json` files.

---

## 4) Husky + lint‑staged (auto‑fix on commit)

Initialize Husky:

```bash
npx husky init
```

Create the pre‑commit hook:

**`.husky/pre-commit`**

```sh
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npx lint-staged
```

Wire up `lint-staged`:

**`package.json` (partial)**

```json
{
  "lint-staged": {
    "*.{ts,tsx,js,jsx}": ["eslint --max-warnings=0 --fix"],
    "*.{ts,tsx,js,jsx,css,md,mdx,json}": ["prettier --write"]
  }
}
```

Now every commit runs Prettier + ESLint on just the changed files. If it can auto‑fix, it does; if not, the commit fails with clear errors.

---

## 5) CI gates (from Part 2)

If you followed **Part 2**, your GitHub Actions workflow already runs tests and smoke checks. Add (or confirm) these steps **before** building/deploying:

```yaml
# .github/workflows/ci.yml (excerpt)
- name: Prettier check
  run: npm run format:check

- name: ESLint
  run: npm run lint
```

These gates keep `main` consistent with local hooks—no “works on my machine” drift.

---

## 6) VS Code quality of life (optional)

**`.vscode/settings.json`**

```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "eslint.validate": [
    "javascript",
    "javascriptreact",
    "typescript",
    "typescriptreact"
  ],
  "eslint.codeActionsOnSave.rules": null,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  }
}
```

This mirrors what Husky does, but gives you instant feedback while you type.

---

## 7) Day‑to‑day flow

```bash
# write code
git add -A
git commit -m "feat: something cool"    # Husky runs lint-staged → ESLint/Prettier

# if it fails:
npm run lint && npm run format:check     # fix → commit again

# push → CI repeats the checks
```

---

## Common gotchas

- **ESM config files**: use `*.mjs` (as shown) for `eslint.config.mjs` and `prettier.config.mjs`.
- **Type‑aware rules are slow**: if linting feels sluggish, remove `parserOptions.project: true` or limit the files ESLint scans.
- **Tailwind class sorting**: make sure `prettier-plugin-tailwindcss` is installed at the top level (root of the repo).
- **Prettier vs ESLint**: formatting is Prettier’s job; avoid ESLint stylistic rules that conflict (`eslint-config-prettier` handles this).

---

## Result

- Code style is consistent and automated.
- Quality rules run on **every commit** and in **CI**.
- `main` stays **green by construction**, and contributors don’t argue about semicolons.

---

### Up Next

In **Part 4**, we’ll cover **testing** (Vitest + Testing Library) and a small **providers helper** that keeps component tests cheap and clean.
