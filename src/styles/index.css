@import 'tailwindcss';

/* =========================
   Self-hosted variable fonts
   ========================= */
@font-face {
  font-family: 'InterVar';
  src: url('/fonts/Inter-Variable.woff2') format('woff2');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap; /* paint text immediately, swap when ready */
  size-adjust: 100%; /* keep visual size close to fallback */
  ascent-override: 90%;
  descent-override: 22%;
  line-gap-override: 0%;
}

@font-face {
  font-family: 'SpaceGroteskVar';
  src: url('/fonts/SpaceGrotesk-Variable.woff2') format('woff2'); /* or SpaceGrotesk[wght].woff2 */
  font-weight: 300 800;
  font-style: normal;
  font-display: swap;
  size-adjust: 100%;
  ascent-override: 88%;
  descent-override: 22%;
  line-gap-override: 0%;
}

/* =========================
   Base tokens (light / dark)
   ========================= */
@layer base {
  :root {
    /* Light */
    --color-bg: #f8fafc; /* slate-50 */
    --color-bg-alt: #ffffff;
    --color-text: #0f172a; /* slate-900 */
    --color-border: #e2e8f0; /* slate-200 */

    --color-brand: #3b82f6; /* blue-500 */
    --color-accent: #f59e0b; /* amber-500 */
    --color-accent-alt: #22d3ee; /* cyan-400 */

    /* Surfaces & hairlines */
    --surface-1: color-mix(in oklab, var(--color-bg), #000 4%);
    --surface-2: color-mix(in oklab, var(--color-bg), #000 7%);
    --hairline: color-mix(in oklab, var(--color-text), transparent 82%);

    --ring: var(--color-accent);

    /* Fonts */
    --font-sans: 'InterVar', ui-sans-serif, system-ui, -apple-system, 'Segoe UI',
      Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji',
      'Segoe UI Emoji', 'Segoe UI Symbol';
    --font-heading: 'SpaceGroteskVar', var(--font-sans);
  }

  html.dark {
    /* Dark */
    --color-bg: #0f172a; /* slate-900 */
    --color-bg-alt: #0b1220;
    --color-text: #cbd5e1; /* slate-300 */
    --color-border: #334155; /* slate-700 */

    --color-brand: #60a5fa; /* blue-400 */
    --color-accent: #fbbf24; /* amber-400 */
    --color-accent-alt: #22d3ee;

    --surface-1: color-mix(in oklab, var(--color-bg), #fff 5%);
    --surface-2: color-mix(in oklab, var(--color-bg), #fff 8%);
    --hairline: color-mix(in oklab, var(--color-text), transparent 78%);
  }

  /* Page base */
  html,
  body {
    background-color: var(--color-bg);
    color: var(--color-text);
    color-scheme: light dark;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: var(--font-sans);
  }

  /* Focus ring */
  :where(a, button, [role='button'], input, select, textarea):focus-visible {
    outline: 2px solid color-mix(in oklab, var(--color-brand), transparent 55%);
    outline-offset: 2px;
    border-radius: 0.5rem;
  }

  /* Selection */
  ::selection {
    background: color-mix(in oklab, var(--color-brand), transparent 70%);
    color: var(--color-text);
  }

  /* Typography */
  header,
  section,
  footer {
    background-color: transparent;
    color: var(--color-text);
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  h1,
  h2,
  h3 {
    font-family: var(--font-heading);
    color: var(--color-brand);
  }

  /* Make H1 “win” LCP by area (bigger than paragraph) */
  h1 {
    font-size: clamp(2.75rem, 5.5vw + 0.5rem, 4.25rem);
    line-height: 1.05;
    font-weight: 800;
  }
  h2 {
    font-size: clamp(1.5rem, 1.4vw + 1rem, 2rem);
    font-weight: 700;
  }
  h3 {
    font-size: clamp(1.25rem, 1vw + 0.9rem, 1.5rem);
    font-weight: 700;
  }

  p,
  a,
  span,
  li,
  button,
  input,
  textarea {
    font-family: var(--font-sans);
  }

  /* Global text sizing */
  p,
  li {
    font-size: 1.125rem; /* 18px */
    line-height: 1.65;
  }

  @media (min-width: 768px) {
    p,
    li {
      font-size: 1.25rem; /* 20px */
      line-height: 1.7;
    }
  }

  small,
  .text-muted,
  .text-muted-2 {
    font-size: 0.9rem;
    line-height: 1.4;
  }

  a {
    color: var(--color-accent);
  }
  @media (hover: hover) and (pointer: fine) {
    a:hover {
      text-decoration: underline;
      text-underline-offset: 0.18em;
      text-decoration-thickness: 0.08em;
      color: var(--color-brand);
    }
  }

  .border {
    border-color: var(--color-border);
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 12px;
  }
  ::-webkit-scrollbar-track {
    background: var(--color-bg);
  }
  ::-webkit-scrollbar-thumb {
    background-color: var(--color-border);
    border-radius: 6px;
    border: 3px solid var(--color-bg);
  }

  /* MDX brand headings */
  .prose :where(h1, h2, h3) {
    color: var(--color-brand);
  }

  /* Anchor scroll margin */
  :where(section, h1, h2, h3, h4, h5, h6)[id] {
    scroll-margin-top: var(--scroll-mt);
  }
}

/* =========================
   Components
   ========================= */
@layer components {
  .btn-primary {
    padding: 0.5rem 1.5rem;
    color: #fff;
    background-color: var(--color-brand);
    border: 1px solid var(--color-brand);
    border-radius: 0.75rem;
    font-weight: 500;
    transition: all 0.2s;
  }
  .btn-primary:hover {
    filter: brightness(0.96);
  }

  .btn-outline {
    padding: 0.5rem 1.5rem;
    color: var(--color-brand);
    background: transparent;
    border: 1px solid var(--color-brand);
    border-radius: 0.75rem;
    font-weight: 500;
    transition: all 0.2s;
  }
  .btn-outline:hover {
    background: var(--color-brand);
    color: #fff;
  }

  .btn-primary,
  .btn-outline {
    outline: none;
  }
  .btn-primary:focus,
  .btn-outline:focus {
    outline: 2px solid color-mix(in oklab, var(--color-brand), transparent 45%);
    outline-offset: 2px;
  }
  .btn-primary:active,
  .btn-outline:active {
    transform: scale(0.98);
  }

  /* Reusable card (projects, list items) */
  .card {
    background: var(--surface-1);
    border: 1px solid var(--hairline);
    border-radius: 1rem;
    box-shadow: 0 4px 16px -8px rgba(0, 0, 0, 0.15);
    transition: transform 160ms ease, box-shadow 160ms ease,
      border-color 160ms ease;
  }
  .card:hover {
    transform: translateY(-2px);
    border-color: color-mix(in oklab, var(--color-brand), transparent 60%);
    box-shadow: 0 10px 28px -12px rgba(0, 0, 0, 0.25);
  }
}

/* =========================
   Utilities (site-wide)
   ========================= */
@layer utilities {
  .section-pad {
    padding-block: 4.5rem;
  }
  @media (min-width: 768px) {
    .section-pad {
      padding-block: 6.5rem;
    }
  }

  .container-base {
    max-width: 72rem;
    margin-inline: auto;
    padding-inline: 1rem;
  }

  .surface-1 {
    background-color: var(--surface-1);
  }
  .surface-2 {
    background-color: var(--surface-2);
  }
  .hairline {
    border-color: var(--hairline);
  }

  .section-divider {
    border-bottom: 1px solid var(--hairline);
  }

  .text-muted {
    color: color-mix(in oklab, var(--color-text), transparent 35%);
  }
  .text-muted-2 {
    color: color-mix(in oklab, var(--color-text), transparent 46%);
  }

  .bg-glass-70 {
    background-color: color-mix(in oklab, var(--color-bg), transparent 30%);
  }
  .bg-glass-90 {
    background-color: color-mix(in oklab, var(--color-bg), transparent 10%);
  }

  .hover-card {
    transition: transform 180ms ease, box-shadow 180ms ease;
  }
  .hover-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 24px -12px rgba(0, 0, 0, 0.25);
  }

  /* Below-the-fold perf helper */
  .cv-auto {
    content-visibility: auto;
    contain-intrinsic-size: 1px 1000px;
  }
}

/* =========================
   Motion / Theme transitions
   ========================= */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}

@media (prefers-reduced-motion: no-preference) {
  :root,
  html,
  body {
    transition: background-color 220ms ease, color 220ms ease,
      border-color 220ms ease, fill 220ms ease, stroke 220ms ease,
      outline-color 220ms ease;
  }
  :root {
    view-transition-name: page;
  }
  ::view-transition-old(page),
  ::view-transition-new(page) {
    animation-duration: 220ms;
    animation-timing-function: ease;
  }
}

/* Prevent jank on theme flip but keep color/opacity transitions */
@media (prefers-reduced-motion: no-preference) {
  html.reduce-heavy-transitions *,
  html.reduce-heavy-transitions *::before,
  html.reduce-heavy-transitions *::after {
    /* Only block expensive properties */
    transition-property: backdrop-filter, filter, box-shadow, transform !important;
    transition-duration: 0ms !important;
  }
}
